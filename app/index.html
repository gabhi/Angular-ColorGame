<!doctype html>
<html lang="en" ng-app="StroopGame">
<head>
  <meta charset="utf-8">
  <title>Stroop Color Game</title>
  <link rel="stylesheet" href="css/app.css"/>
  <link rel="stylesheet" href="css/ribbons.css"/>
  <link rel="stylesheet" href="css/bootstrap.css"/>
  <link rel="stylesheet" href="css/bootstrap-responsive.css"/>
  <link rel="shortcut icon" href="img/favicon2.ico">
  <meta property="og:title" content="Stroop Color Game"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://stroopgame.com/"/>
    <meta property="og:image" content="http://stroopgame.com/app/img/color.png"/>
    <meta property="og:site_name" content="Stroop Color Game"/>
    <meta property="og:description" content="Stroop Effect is a famous psychology game for testing reaction. Choose the color of the text by either clicking the button "/>

</head>

<body ng-controller="StroopGameCtrl" ui-Keydown="{71 : 'clicked(\'green\')',82 : 'clicked(\'red\')','66' : 'clicked(\'blue\')','79' : 'clicked(\'orange\')' }">
	<div id="fb-root"></div>

<script>
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
                document.getElementById('logindisplay').style.visibility = 'block';

    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into Facebook.';
                        document.getElementById('logindisplay').style.visibility = 'block';

    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  window.fbAsyncInit = function() {
  FB.init({
    appId      : '609372545866148',
    cookie     : true,  // enable cookies to allow the server to access 
                        // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.2' // use version 2.2
  });

  // Now that we've initialized the JavaScript SDK, we call 
  // FB.getLoginStatus().  This function gets the state of the
  // person visiting this page and can return one of three states to
  // the callback you provide.  They can be:
  //
  // 1. Logged into your app ('connected')
  // 2. Logged into Facebook, but not your app ('not_authorized')
  // 3. Not logged into Facebook and can't tell if they are logged into
  //    your app or not.
  //
  // These three cases are handled in the callback function.

  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
  });

  };

  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
        'Thanks for logging in, ' + response.name + '!';
        
        document.getElementById('logindisplay').style.visibility = 'hidden';
    });
  }
</script>

<!--
  Below we include the Login Button social plugin. This button uses
  the JavaScript SDK to present a graphical Login button that triggers
  the FB.login() function when clicked.
-->


<div id="logindisplay">
    <span id="login">
      <fb:login-button scope="public_profile,email"  background="dark" onlogin="checkLoginState();">
      </fb:login-button>
    </span>
</div>

 

<div id="status">
</div>



 
 

	<div class="row-fluid" style="width:90%; margin-left:10%;margin-top:20px" >
		<div class="span8">
			<legend>Stroop Color Game | Countdown:<span ng-class='UI.countDownClass' ng-bind="game.countDown || '?'"></span></legend>		
			<div class="alert alert-block">
			  <button type="button" class="close" data-dismiss="alert">&times;</button>
			  Stroop Effect is a famous psychology game for testing reaction. Choose the color of the text by either clicking the button below or keypress. 
			  http://en.wikipedia.org/wiki/Stroop_effect
			</div>
			
			<div id="summary" ng-show="game.isStarted" ng-cloak>
			   Total right: {{game.rightCount}}, Total wrong:{{game.wrongCount}}, Total Answered {{game.rightCount+game.wrongCount}}</br>
			</div>
		
			<div class="row-fluid">		
				<div class="box">
					<div ng-class="game.quizClass">
						<span ng-bind="game.quizText || 'Color'"></span>				
					</div>
				</div>
				<div class="box2">
					<img ng-src={{UI.imgSrc}} style="width:100px; height:100px; margin-left:15%; margin-top:15%" ng-cloak></img>
				</div>
			</div>
			<div ng-show='UI.showStartButton' style="margin-top:20px; margin-bottom:20px;">		   
				<a class="btn btn-large btn-primary" ng-click="startGame()">Start Play!</a>
			</div>
			
			<div ng-show='UI.showGameButton' style="margin-top:20px; margin-bottom:20px;" ng-cloak>
				<a class="btn btn-large btn-danger" ng-click="clicked('green')">Green(G)</a>
				<a class="btn btn-large btn-info" ng-click="clicked('red')">Red(R)</a>
				<a class="btn btn-large btn-success" ng-click="clicked('orange')">Orange(O)</a>
				<a class="btn btn-large btn-warning" ng-click="clicked('blue')">Blue(B)</a>				
			</div>
				
			<div class="progress" style="width:800px">
				<div class="bar bar-success" style={{UI.rightLength}}></div>
				<div class="bar bar-danger" style={{UI.wrongLength}}></div>
			</div>		
        </div>
		<div class="span3">	
			<div class="accordion" id="accordion2">		
			  <div class="accordion-group">
				<div class="accordion-heading">
				  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
					Rules
				  </a>
				</div>
				<div id="collapseTwo" class="accordion-body collapse in">
				  <div class="accordion-inner">
					The rule for this game is to tell the color of the text rather than meaning of the text. </br></br>
					You have <strong><span ng-bind="totalTime || '?'"></span> seconds </strong> to answer the questions. You may either choose the buttons indicating the color 
					or use keyboard: press"B":blue, press"G":green, press "R": red, press "O": orange.
					Wrong answer will substract the score, while correct answer incrementing score. </br></br>
					<strong>The buttons are intentially scrambled color. Try to use the button instead of keyPress, so you get more practice.</strong>
				  </div>
				</div>
			  </div>
			  
			    <div class="accordion-group">
				<div class="accordion-heading">
				  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
					Top 10 players in the world
				  </a>
				</div>
				<div id="collapseOne" class="accordion-body collapse">
				  <div class="accordion-inner">
					Functionality to be added.
				  </div>
				</div>
			  </div>		  
			</div>
		 <div class="alert alert-info">
		  <button type="button" class="close" data-dismiss="alert">&times;</button>
		  Hint: You may cheat to press key to answer.  Don't use it if you consider yourself as Ninja!</br> press"B":blue, press"G":green, press "R": red, press "O": orange
		</div>
		</div>
   </div>
    <div ui-modal class="fade" ng-model="modalShown" id="myModal">
		<div class="modal-header">
			<h4>Result</h4>
			<a ng-click="modalShown=false">Close</a>
		</div>
		<div class="modal-body well">
			<p>In {{totalTime}} seconds, you answered total {{game.rightCount+game.wrongCount}} questions;</br>
			Of them {{game.rightCount}} is correct.  Of them {{game.wrongCount}} is wrong. </br>
			Remember, your score get subtracted when you have a wrong answer.
			Your total score is:{{game.totalScore}}.</br>
			Please Leave your name:</br>
			 <input type="text" placeholder="Your Name" ng-model="game.userName"></input>
			</p>
		</div>
					
		<div class="modal-footer">
			<button class="btn btn-info cancel" ng-click="modalShown=false">Save</button><!--save to database to be continued-->
			<button class="btn btn-warning cancel" ng-click="modalShown=false">Cancel</button>
		</div>
	</div>
	
	<hr/>
	<div class="row-fluid" style="width:90%; margin-left:10%;margin-top:20px" >
		<div class="span8">
	<footer>
	
		<p>
 		</p>
		
		<p>
 		</p>
	</footer> 
	</div><div class="3">
			<p>
			<span class="pull-right" style="margin-right:5%">
			   Linghua Jin 2013
				<a href="http://www.twitter.com/linghuaj"><img src="img/twitter.PNG"></a>
			</span>
		</p>
	</div>
	

	<script src="lib/jquery-1.7.2.min.js"></script>
	<script src="lib/angular/angular.js"></script>
	<script src="lib/angular-ui.js"></script>
	<script src="lib/bootstrap.js"></script>
	<script src="js/app.js"></script>
	<script src="js/services.js"></script>
	<script src="js/controllers.js"></script>
	<script src="js/directives.js"></script>
	
	
</body>
</html>
